<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ระบบคำร้องออนไลน์ มหาวิทยาลัยธรรมศาสตร์">
    <title>ระบบคำร้องออนไลน์ - เขียนคำร้อง</title>
    <link rel="stylesheet" href="css/styles_student.css">
    <link rel="stylesheet" href="css/styles_petition.css">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <img src="img/thammasat-logo.png" alt="Thammasat University Logo">
            </div>
            <div class="profile">
                <div class="profile-pic">
                    <img src="img/blank-profile-picture-973460_1920.png" alt="Profile Picture">
                </div>
                <div class="profile-info">
                    <p class="student-name">Loading...</p>
                    <p class="student-id">Loading...</p>
                </div>
            </div>
            <nav class="menu">
                <button class="menu-btn">ข้อมูลส่วนตัว</button>
                <button class="menu-btn active">เขียนคำร้อง</button>
                <button class="menu-btn">ตรวจสอบสถานะคำร้อง</button>
                <button class="menu-btn logout">ออกจากระบบ</button>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="loading-overlay">
                <div class="spinner"></div>
                <p>กำลังโหลดข้อมูล...</p>
            </div>
            <header class="content-header">
                <h1>ยื่นคำร้อง</h1>
            </header>
            <!-- Step 1: Select Petition Type -->
            <div id="petitionTypeSection">
                <div class="content-body">
                    <div class="petition-list">
                        <div class="petition-category">
                            <h2>เลือกประเภทคำร้อง</h2>
                            <div class="petition-grid">
                                <div class="petition-card" data-type="education">
                                    <div class="card-content">
                                        <h3>คำร้องปกติศึกษา</h3>
                                        <div class="card-icon">
                                            <svg width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <div class="petition-card" data-type="exam">
                                    <div class="card-content">
                                        <h3>คำร้องกรณีขาดสอบ</h3>
                                        <div class="card-icon">
                                            <svg width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <div class="petition-card" data-type="leave">
                                    <div class="card-content">
                                        <h3>คำร้องขอลาพักการศึกษา</h3>
                                        <div class="card-icon">
                                            <svg width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <div class="petition-card" data-type="transcript">
                                    <div class="card-content">
                                        <h3>คำร้องรอการศึกษาตามหลักสูตร</h3>
                                        <div class="card-icon">
                                            <svg width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <div class="petition-card" data-type="guardian">
                                    <div class="card-content">
                                        <h3>หนังสือรับรองผู้ปกครอง</h3>
                                        <div class="card-icon">
                                            <svg width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Select Submit Method (Initially Hidden) -->
            <div id="submitMethodSection" style="display: none;" class="content-submit">
                <header class="content-header">
                    <div class="section-header">
                        <button id="backButton" class="back-button">
                            <span class="arrow-icon">‹</span>
                            <span>เลือกคำร้องออนไลน์</span>
                        </button>
                        <span>|&nbsp;</span>
                        <span id="selectedPetitionTitle"></span>
                    </div>
                </header>

                <div class="content-body">
                    <div class="submit-options">
                        <div class="petition-card" data-method="online">
                            <div class="card-content">
                                <h3>กรอกแบบฟอร์มออนไลน์</h3>
                                <div class="card-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24">
                                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"/>
                                        <path d="M7 7h10v2H7zm0 4h10v2H7zm0 4h7v2H7z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="petition-card" data-method="upload">
                            <div class="card-content">
                                <h3>อัปโหลดรูปภาพ</h3>
                                <div class="card-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24">
                                        <path d="M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>แจ้งเตือน</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modalMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" onclick="closeModal()">ตกลง</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/API.js"></script>
    <script type="module" src="js/petition_script.js"></script>
</body>
</html>